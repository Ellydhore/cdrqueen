{% extends 'base_nav.html' %}
{% load static %}

{% block title %}Product Catalog{% endblock %}

{% block content %}
<h1>Product Catalog</h1>

<!-- Search and Filter Section -->
<form method="get" action="{% url 'product_catalog' %}">
    <input type="text" name="query" placeholder="Search by name or description" value="{{ query }}">
    <select name="category">
        <option value="">All Categories</option>
        <option value="CPU" {% if category == 'CPU' %}selected{% endif %}>Processor</option>
        <option value="GPU" {% if category == 'GPU' %}selected{% endif %}>Graphics Card</option>
        <option value="RAM" {% if category == 'RAM' %}selected{% endif %}>Memory</option>
        <option value="HDD" {% if category == 'HDD' %}selected{% endif %}>Hard Disk Drive</option>
        <option value="SSD" {% if category == 'SSD' %}selected{% endif %}>Solid State Drive</option>
    </select>
    <input type="number" name="min_price" placeholder="Min Price" value="{{ min_price }}">
    <input type="number" name="max_price" placeholder="Max Price" value="{{ max_price }}">
    <button type="submit">Filter</button>
</form>

<!-- Product Grid Section -->
<div class="product-grid">
    {% for product in products %}
        <div class="product-item">
            {% if product.image_url %}
                <img src="{{ product.image_url }}" alt="{{ product.name }}">
            {% else %}
                <img src="{% static 'default_image.jpg' %}" alt="No image available">
            {% endif %}
            <h2>{{ product.name }}</h2>
            <p><strong>Brand:</strong> {{ product.brand }}</p>
            <p><strong>Price:</strong> ${{ product.price }}</p>
            <p><strong>Description:</strong> {{ product.description|truncatewords:20 }}</p>
        </div>
    {% empty %}
        <p>No products found.</p>
    {% endfor %}
</div>
{% endblock %}

